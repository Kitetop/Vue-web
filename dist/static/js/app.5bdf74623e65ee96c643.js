webpackJsonp([1],{"/ukl":function(t,e){},"8xie":function(t,e){},Adg5:function(t,e){},EscP:function(t,e){},FI92:function(t,e){e.HOST="http://10.0.20.190:8090/vote/v1/",e.TIMEOUT=5e3},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("4bK6"),o=s.n(n),a=s("/ocq"),i=(s("/5sW"),s("mw3O")),r=s.n(i),l=s("FI92"),c={name:"createVote",data:function(){return{voteText:{title:"",userId:"",vote:[{chose:["",""],question:"",type:""}]}}},methods:{removeChose:function(t,e){var s=this.voteText.vote[e].chose.indexOf(t);-1!=s&&this.voteText.vote[e].chose.splice(s,1)},addChose:function(t){this.voteText.vote[t].chose.push("")},addQuestion:function(){var t=this.voteText.vote.length;console.log(t),this.voteText.vote[t-1].chose.length<2?alert("请至少给一个问题设置两个选项"):""===this.voteText.vote[t-1].question||""===this.voteText.vote[t-1].type?alert("问题或者问题类型不能为空"):this.voteText.vote.push({chose:["",""],question:"",type:""})},submit:function(){var t=this;this.voteText.userId=this.$route.params.userId,this.axios({url:l.HOST+"vote_v1",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:r.a.stringify(this.voteText)}).then(function(e){alert("投票发布成功"),t.voteText={title:"",userId:"",vote:[{chose:["",""],question:"",type:""}]}}).catch(function(t){alert("投票发布失败，请检查投票信息时候有遗漏")})}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{attrs:{span:12,offset:6}},[s("el-form",{staticClass:"demo-dynamic",attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"问卷标题",prop:"title"}},[s("el-input",{model:{value:t.voteText.title,callback:function(e){t.$set(t.voteText,"title",e)},expression:"voteText.title"}})],1)],1),t._v(" "),t._l(t.voteText.vote,function(e,n){return s("div",{ref:"voteText",refInFor:!0,attrs:{model:t.voteText}},[s("el-form",{staticClass:"demo-dynamic",attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"问题 "+(n+1),prop:"question"}},[s("el-input",{model:{value:e.question,callback:function(s){t.$set(e,"question",s)},expression:"question.question"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"type"}},[[s("el-radio",{attrs:{label:"radio"},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"question.type"}},[t._v("单选")]),t._v(" "),s("el-radio",{attrs:{label:"checkbox"},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"question.type"}},[t._v("多选")])]],2),t._v(" "),t._l(e.chose,function(o,a){return s("el-form-item",{key:o.key,attrs:{label:"选项 "+(a+1)}},[s("el-input",{model:{value:e.chose[a],callback:function(s){t.$set(e.chose,a,s)},expression:"question.chose[index]"}}),t._v(" "),s("el-button",{on:{click:function(e){if(!("button"in e)&&t._k(e.keyCode,"prevebt",void 0,e.key,void 0))return null;t.removeChose(o,n)}}},[t._v("删除")])],1)}),t._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"info",plain:""},on:{click:function(e){t.addChose(n)}}},[t._v(" 新增选项")])],1)],2)],1)})],2)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:12,offset:6}},[s("el-form",{staticClass:"demo-dynamic",attrs:{"label-width":"100px"}},[s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(e){t.addQuestion()}}},[t._v(" 新增问题")])],1),t._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(t){s("Adg5")},"data-v-b8f9a554",null).exports,h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-button",{attrs:{size:"mini",type:"text",plain:""},on:{click:this.goLogin}},[this._v("登录")]),this._v(" "),e("el-button",{attrs:{size:"mini",type:"text",plain:""}},[this._v("注册")])],1)},staticRenderFns:[]};var v=s("VU/8")({name:"loginHeard",methods:{goLogin:function(){this.$router.push("/login")}}},h,!1,function(t){s("RQA7")},"data-v-77d148fd",null).exports,p={name:"showResult",props:["voteId"],data:function(){return{result:[]}},created:function(){this.id=this.$route.params.id,this.getResult()},methods:{getResult:function(){var t=this;this.axios({url:l.HOST+"result_v1?voteId="+this.voteId,method:"GET"}).then(function(e){for(var s=0;s<e.data.result.length;s++)for(var n in t.result.push({question:"",choseKey:[],choseValue:[]}),t.result[s].question=e.data.result[s].question,e.data.result[s])"question"!==n&&"type"!==n&&(t.result[s].choseKey.push(n),t.result[s].choseValue.push(e.data.result[s][n]))}).catch(function(e){alert("Some errors have occurred on the server"),t.change()})},change:function(){this.$emit("change")}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.result,function(e,n){return s("el-row",{key:n},[s("el-col",{attrs:{span:12,offset:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix"},[s("span",[t._v(t._s(e.question))])]),t._v(" "),t._l(e.choseKey,function(n,o){return s("div",{staticClass:"text item"},[s("span",[t._v(t._s(n)+" :")]),t._v(" "),s("span",[t._v(t._s(e.choseValue[o]))])])})],2)],1)],1)}),t._v(" "),s("el-col",{attrs:{span:4,offset:7}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",plain:""},on:{click:t.change}},[t._v("我知道了")])],1)],2)},staticRenderFns:[]};var f=s("VU/8")(p,m,!1,function(t){s("opql")},"data-v-316331b0",null).exports,_={name:"myVotes",data:function(){return{id:"",queryId:"",showComponent:"",votes:{pages:"",list:[],prev:"",next:""},list:[]}},created:function(){this.id=this.$route.params.userId,this.getVotes()},methods:{getVotes:function(){var t=this;this.axios({url:l.HOST+"showlist_v1?userId="+this.id,method:"GET"}).then(function(e){t.votes.pages=e.data.meta.pages,t.votes.prev=e.data.prev,t.votes.next=e.data.next,e.data.list.forEach(function(e){t.votes.list.push({id:e.id,title:e.title,time:e.createTime})})}).catch(function(t){})},getResult:function(t){this.queryId=t,this.showComponent=f},change:function(){this.showComponent=""}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.votes.list,function(e){return s("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.showComponent,expression:"! showComponent"}],key:e.id},[s("el-col",{attrs:{span:12,offset:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix"},[s("span",[t._v(t._s(e.title))]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){t.getResult(e.id)}}},[t._v("查看详情")])],1),t._v(" "),s("div",{staticClass:"text item"},[t._v("\n                    "+t._s(e.time)+"\n                ")])])],1)],1)}),t._v(" "),s(t.showComponent,{tag:"component",attrs:{voteId:t.queryId},on:{change:t.change}})],2)},staticRenderFns:[]};var w=s("VU/8")(_,x,!1,function(t){s("xXTy")},"data-v-9dc416a6",null).exports,y={name:"addResult",props:["voteId","userId"],data:function(){return{title:"",result:[],chose:{voteId:this.voteId,result:[]}}},created:function(){this.getResult()},methods:{submit:function(){var t=this;this.changeForm(),this.axios({url:l.HOST+"result_v1",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:r.a.stringify(this.chose)}).then(function(e){alert("投票成功，感谢你的参与"),t.change()}).catch(function(e){alert("请勿重复提交"),t.change()})},changeForm:function(){for(var t=0;t<this.result.length;t++)if(this.chose.result.push(this.result[t].answer),"checkbox"==this.result[t].type)for(var e=0;e<this.result[t].choseValue.length;e++)!0===this.result[t].answer[e]&&(this.result[t].answer[e]=this.result[t].choseValue[e])},getResult:function(){var t=this;this.axios({url:"http://10.0.20.190:8090/vote/v1/result_v1?voteId="+this.voteId,method:"GET"}).then(function(e){t.title=e.data.title;for(var s=0;s<e.data.result.length;s++){for(var n in t.result.push({choseValue:[],type:"",question:"",answer:[]}),t.result[s].question=e.data.result[s].question,e.data.result[s])"question"!==n&&"type"!==n&&t.result[s].choseValue.push(n);t.result[s].type=e.data.result[s].type}}).catch(function(t){})},change:function(){this.$emit("change")}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{attrs:{span:12,offset:6}},[s("el-card",{staticClass:"box-card"},[s("span",{staticClass:"text"},[t._v(t._s(t.title))])])],1),t._v(" "),t._l(t.result,function(e,n){return s("el-col",{key:e.question,attrs:{span:12,offset:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix question"},[s("span",[t._v(t._s(e.question))])]),t._v(" "),t._l(e.choseValue,function(n,o){return s("div",{staticClass:"answer item"},["radio"===e.type?s("div",[[s("el-radio",{attrs:{label:n},model:{value:e.answer[0],callback:function(s){t.$set(e.answer,0,s)},expression:"item.answer[0]"}})]],2):t._e(),t._v(" "),"checkbox"===e.type?s("div",[[s("el-checkbox",{attrs:{label:n},model:{value:e.answer[o],callback:function(s){t.$set(e.answer,o,s)},expression:"item.answer[key]"}})]],2):t._e()])})],2)],1)})],2),t._v(" "),s("el-row",[s("el-col",{attrs:{span:4,offset:7}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:""},on:{click:t.submit}},[t._v("提交投票")])],1)],1)],1)},staticRenderFns:[]};var b=s("VU/8")(y,g,!1,function(t){s("/ukl")},"data-v-56cf044a",null).exports,k={name:"startVote",data:function(){return{id:"",voteId:"",showComponent:"",votes:{pages:"",list:[],prev:"",next:""},list:[]}},created:function(){this.id=this.$route.params.userId,this.getVotes()},methods:{getVotes:function(){var t=this;this.axios({url:l.HOST+"showlist_v1?all=true&userId="+this.id,method:"GET"}).then(function(e){t.votes.pages=e.data.meta.pages,t.votes.prev=e.data.prev,t.votes.next=e.data.next,e.data.list.forEach(function(e){t.votes.list.push({id:e.id,title:e.title,time:e.createTime})})}).catch(function(t){})},addResult:function(t){this.voteId=t,this.showComponent=b},change:function(){this.showComponent=""}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.votes.list,function(e){return s("el-row",{directives:[{name:"show",rawName:"v-show",value:!t.showComponent,expression:"! showComponent"}],key:e.id},[s("el-col",{attrs:{span:12,offset:6}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix"},[s("span",[t._v(t._s(e.title))]),t._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){t.addResult(e.id)}}},[t._v("参加投票")])],1),t._v(" "),s("div",{staticClass:"text item"},[t._v("\n                    "+t._s(e.time)+"\n                ")])])],1)],1)}),t._v(" "),s(t.showComponent,{tag:"component",attrs:{voteId:t.voteId,userId:t.id},on:{change:t.change}})],2)},staticRenderFns:[]};var C=s("VU/8")(k,T,!1,function(t){s("8xie")},"data-v-d04b7204",null).exports,I={components:{loginHeard:v,myVotes:w,createVote:d},data:function(){return{id:"",index:"",username:"",chose1:"",chose2:"",chose3:""}},created:function(){this.username=this.$route.params.username,this.id=this.$route.params.userId;var t=this.$route.path.split("/")[1];this.index="user"===t?"1":"vote"===t?"2":"3"},methods:{choseFunction:function(t){1==t?this.$router.push("/user/"+this.username+"/"+this.id):2==t?this.$router.push("/vote/"+this.username+"/"+this.id):this.$router.push("/start/"+this.username+"/"+this.id)}}},q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-row",[s("el-col",{attrs:{span:4,offset:6}},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.index,mode:"horizontal"}},[s("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.choseFunction(1)}}},[t._v("我的投票")]),t._v(" "),s("el-menu-item",{attrs:{index:"2"},on:{click:function(e){t.choseFunction(2)}}},[t._v("发起投票")]),t._v(" "),s("el-menu-item",{attrs:{index:"3"},on:{click:function(e){t.choseFunction(3)}}},[t._v("开始投票")])],1)],1),t._v(" "),s("el-col",{staticClass:"block-col-2",attrs:{span:3,offset:8}},[s("login-heard",{directives:[{name:"show",rawName:"v-show",value:!t.username,expression:"!username"}]}),t._v(" "),s("el-menu",{directives:[{name:"show",rawName:"v-show",value:t.username,expression:"username"}]},[s("el-dropdown",{attrs:{trigger:"click"}},[s("p",{staticClass:"el-dropdown-link"},[t._v("\n                        "+t._s(t.username)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[t._v("个人资料")]),t._v(" "),s("el-dropdown-item",[t._v("设置")])],1)],1)],1)],1)],1),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var $=s("VU/8")(I,q,!1,function(t){s("qwXH")},null,null).exports,V={data:function(){return{labelPosition:"right",username:"",password:""}},methods:{login:function(){var t=this;console.log(l.HOST),this.axios({url:l.HOST+"login",method:"POST",params:{username:this.username,password:this.password}}).then(function(e){t.$router.push("/user/"+t.username+"/"+e.data.id)}).catch(function(e){alert("账号或者密码错误，请确认信息"),t.password=null})}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",[s("el-col",{attrs:{span:8,offset:8}},[s("div",{staticStyle:{margin:"20px"}}),t._v(" "),s("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名",for:"username"}},[s("el-input",{attrs:{id:"username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"密码",for:"password"}},[s("el-input",{attrs:{id:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:21,offset:3}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)},staticRenderFns:[]};var S=s("VU/8")(V,R,!1,function(t){s("a6X0")},"data-v-48dcd472",null).exports,E=new a.a({mode:"history",routes:[{path:"/",component:S},{path:"/user/:username/:userId",component:$,children:[{path:"/user/:username/:userId",component:w},{path:"/vote/:username/:userId",component:d},{path:"/start/:username/:userId",component:C}]},{path:"/login",name:"login",component:S},{path:"*",redirect:"/"}]}),F=s("zL8q"),O=s.n(F),H=(s("tvR6"),s("mtWM")),U=s.n(H),P=s("Rf8U"),A=s.n(P),N=(s("7t+N"),{render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]});var X=s("VU/8")({name:"App"},N,!1,function(t){s("EscP")},"data-v-2cf3c3ce",null).exports;o.a.config.productionTip=!1,o.a.use(a.a),o.a.use(E),o.a.use(O.a),o.a.use(A.a,U.a),new o.a({el:"#app",router:E,components:{App:X},template:"<App/>"})},RQA7:function(t,e){},a6X0:function(t,e){},opql:function(t,e){},qwXH:function(t,e){},tvR6:function(t,e){},xXTy:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5bdf74623e65ee96c643.js.map